<!DOCTYPE html>
<html lang="ko">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Signup Form</title>
<style>
@font-face {
	font-family: 'NoonnuBasicGothicRegular';
	src:
		url('https://fastly.jsdelivr.net/gh/projectnoonnu/noon-2410@1.0/NoonnuBasicGothicRegular.woff2')
		format('woff2');
	font-weight: normal;
	font-style: normal;
}

* {
	box-sizing: border-box;
}

.header {
    position: fixed; /* 헤더를 고정 */
    top: 0; /* 화면 상단에 배치 */
    left: 0;
    width: 100%; /* 전체 화면 너비 */
    height: 80px; /* 헤더 높이 */
    background-color: rgba(255, 227, 159, 1);
    display: flex;
    align-items: center;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    z-index: 1000; /* 다른 요소보다 위에 표시 */
}

.headerLogo {
    padding: 15px; /* 위쪽 여백 추가 */
}

.headerLogo img {
	height: 50px; /* 로고 크기 조정 */
}

body {
    font-family: 'NoonnuBasicGothicRegular';
    background: linear-gradient(135deg, #fdfcfb 0%, #e2d1c3 100%);
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column; /* 세로 정렬 */
    align-items: center;
}

.main-content {
    margin-top: 100px; /* 헤더 높이만큼 폼을 아래로 이동 */
    display: flex;
    justify-content: center;
    align-items: center;
    flex-grow: 1;
    width: 100%;
}

.container {
	background-color: #fff;
	border-radius: 10px;
	box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px
		rgba(0, 0, 0, 0.22);
	padding: 20px;
	width: 400px;
	max-width: 100%;
}

h2 {
	font-weight: bold;
	margin: 0 0 20px;
	text-align: center;
	font-weight: bold;
	color: #553631;
}

.form-group {
	margin-bottom: 15px;
}

label {
	display: block;
	margin-bottom: 5px;
	font-size: 14px;
	color: #553631;
}

input {
	background-color: #eee;
	border: none;
	padding: 12px 15px;
	margin: 8px 0;
	width: 100%;
	font-size: 14px;
}

button {
	border-radius: 20px;
	border: 1px solid #e28d3e;
	background-color: #e28d3e;
	color: #FFFFFF;
	font-family: 'NoonnuBasicGothicRegular';
	font-size: 20px;
	font-weight: bold;
	padding: 12px 45px;
	letter-spacing: 1px;
	text-transform: uppercase;
	transition: transform 80ms ease-in;
	cursor: pointer;
	width: 100%;
}

button:active {
	transform: scale(0.95);
}

button:focus {
	outline: none;
}


button:hover {
    background-color: #d1742b;
}

#message {
	margin-top: 20px;
	text-align: center;
	font-size: 14px;
}

.error {
	color: #ee4035;
	font-size: 12px;
}

.password-hint {
	font-size: 12px;
	color: #666;
	margin-top: 5px;
	display: none;
}

.password-strength {
	margin-top: 5px;
}

.password-strength div {
	height: 5px;
	border-radius: 4px;
}

.weak {
	width: 33%;
	background-color: #ee4035;
}

.medium {
	width: 66%;
	background-color: #f37736;
}

.strong {
	width: 100%;
	background-color: #7bc043;
}

/* 체크박스 그룹 스타일 */
.checkbox-group {
    display: flex;
    gap: 20px; /* 각 항목 간 간격 */
    margin-top: 10px;
}

.checkbox-label {
    display: flex;
    align-items: center;
    cursor: pointer; /* 커서를 손 모양으로 변경 */
    font-size: 16px;
    color: #553631;
}

.checkbox-label input {
    display: none; /* 기본 체크박스 숨기기 */
}

.checkbox-label span {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 2px solid #e28d3e;
    border-radius: 4px; /* 모서리를 둥글게 */
    margin-right: 10px; /* 체크박스와 텍스트 간 간격 */
    background-color: #fff;
    transition: background-color 0.3s ease, border-color 0.3s ease;
}

.checkbox-label input:checked + span {
    background-color: #e28d3e; /* 선택된 상태 색상 */
    border-color: #d1742b;
}

.checkbox-label input:checked + span::after {
    content: "";
    display: block;
    width: 10px;
    height: 10px;
    margin: 4px auto; /* 중앙 정렬 */
    background-color: #fff;
    border-radius: 2px;
}
</style>
</head>

<body>
	<div class="header">
			<a href="/DoTheG/view/main.jsp">
	        	<div class="headerLogo">
	            	<img src="/DoTheG/images/serviceLogo_ko.png" alt="로고 이미지">
	        	</div>
			</a>
	</div>
	
	<div class="main-content">
	<div class="container">
		<h2>회원가입</h2>
		<form id="signupForm" action="../article?command=register"
			method="post">
			<div class="form-group">
				<label for="username">이름</label> <input type="text" id="username"
					name="username" required>
			</div>
			<div class="form-group">
				<label for="id">아이디</label> <input type="text" id="id" name="id"
					required>
			</div>
			<div class="form-group">
				<label for="email">이메일</label> <input type="email" id="email"
					name="email" required>
			</div>
			<div class="form-group">
				<label for="password">비밀번호</label> <input type="password"
					id="password" name="password" required>
				<div class="password-hint" id="passwordHint">
					▪ 비밀번호는 최소 8자 이상 <br> ▪ 대문자 알파벳을 하나 이상 포함 (예: A, B, C...) <br>
					▪ 소문자 알파벳을 하나 이상 포함 (예: a, b, c...) <br> ▪ 숫자를 하나 이상 포함 <br>
					▪ 특수문자를 하나 이상 포함 (예: !, @, #...)
				</div>
				<span id="passwordError" class="error"></span>
				<div class="password-strength" id="passwordStrength"></div>
			</div>
			<div class="form-group">
				<label for="confirmPassword">비밀번호 확인</label> <input type="password"
					id="confirmPassword" name="confirmPassword" required> <span
					id="confirmPasswordError" class="error"></span>
			</div>
			<div class="form-group">
				<label for="nickname">닉네임</label> <input type="text" id="nickname"
					name="nickname" required>
			</div>
			<div class="form-group">
			    <label>회원 유형</label>
			    <div class="checkbox-group">
			        <label class="checkbox-label" for="teacher">
			            <input type="checkbox" id="teacher" name="roleCheckbox" value="teacher" onchange="toggleCheckbox(this)">
			            <span></span>선생님
			        </label>
			        <label class="checkbox-label" for="student">
			            <input type="checkbox" id="student" name="roleCheckbox" value="student" onchange="toggleCheckbox(this)">
			            <span></span>학생
			        </label>
			    </div>
			</div>

			<!-- 선택된 값이 저장될 hidden input -->
			<input type="hidden" id="role" name="role" value="">

			<script>
			    function toggleCheckbox(clickedCheckbox) {
			        let checkboxes = document.getElementsByName("roleCheckbox");
			        checkboxes.forEach((checkbox) => {
			            if (checkbox !== clickedCheckbox) {
			                checkbox.checked = false; // 다른 체크박스 선택 해제
			            }
			        });
			
			        // 선택된 체크박스의 value를 hidden input에 저장
			        document.getElementById("role").value = clickedCheckbox.checked ? clickedCheckbox.value : "";
			    }
			</script>

			<button type="submit">가입 완료</button>
		</form>
		<p id="message"></p>
	</div>
	</div>
	<script>
		document.getElementById('signupForm').addEventListener('submit', function (event) {
		    event.preventDefault(); // 기본 제출 동작 막기
	
		    let username = document.getElementById('username').value;
		    let email = document.getElementById('email').value;
		    let password = document.getElementById('password').value;
		    let confirmPassword = document.getElementById('confirmPassword').value;
		    let message = document.getElementById('message');
		    let passwordError = document.getElementById('passwordError');
		    let confirmPasswordError = document.getElementById('confirmPasswordError');
	
		    // 비밀번호 유효성 검사
		    let passwordValid = validatePassword(password);
		    if (!passwordValid) {
		        passwordError.textContent = '비밀번호가 기준에 맞지 않습니다.';
		        return;
		    } else {
		        passwordError.textContent = '';
		    }
	
		    // 비밀번호 확인 일치 여부 검사
		    if (password !== confirmPassword) {
		        confirmPasswordError.textContent = '비밀번호가 서로 맞지 않습니다.';
		        return;
		    } else {
		        confirmPasswordError.textContent = '';
		    }
	
		    // 성공 메시지 출력 (이 부분은 유지)
		    message.style.color = 'green';
		    message.textContent = '가입 완료! 어디로 떠나볼까요?';
	
		    // 🚀 폼 제출 (서버로 전송)
		    this.submit(); // ✅ 유효성 검사 통과 후 폼 제출 실행
		});


        document.getElementById('password').addEventListener('focus', function () {
            document.getElementById('passwordHint').style.display = 'block';
        });

        document.getElementById('password').addEventListener('blur', function () {
            document.getElementById('passwordHint').style.display = 'none';
        });

        document.getElementById('password').addEventListener('input', function () {
            let password = this.value;
            let passwordStrength = document.getElementById('passwordStrength');
            let strength = getPasswordStrength(password);

            passwordStrength.innerHTML = ''; // Clear previous strength bars
            if (strength) {
                let strengthBar = document.createElement('div');
                strengthBar.className = strength;
                passwordStrength.appendChild(strengthBar);
            }
        });

        function validatePassword(password) {
            let regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
            return regex.test(password);
        }

        function getPasswordStrength(password) {
            if (password.length < 8) {
                return 'weak';
            }
            if (password.match(/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])/)) {
                return 'strong';
            }
            return 'medium';
        }
    </script>
</body>

</html>
