<!DOCTYPE html>
<html lang="ko">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Signup Form</title>
<style>
@font-face {
	font-family: 'NoonnuBasicGothicRegular';
	src:
		url('https://fastly.jsdelivr.net/gh/projectnoonnu/noon-2410@1.0/NoonnuBasicGothicRegular.woff2')
		format('woff2');
	font-weight: normal;
	font-style: normal;
}

* {
	box-sizing: border-box;
}

body {
	font-family: 'NoonnuBasicGothicRegular';
	background: ##FFE39F;
	display: flex;
	justify-content: center;
	align-items: center;
	height: 100vh;
	margin: 0;
}

.container {
	background-color: #fff;
	border-radius: 10px;
	box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px
		rgba(0, 0, 0, 0.22);
	padding: 20px;
	width: 400px;
	max-width: 100%;
}

h2 {
	font-weight: bold;
	margin: 0 0 20px;
	text-align: center;
	font-weight: bold;
	color: #553631;
}

.form-group {
	margin-bottom: 15px;
}

label {
	display: block;
	margin-bottom: 5px;
	font-size: 14px;
	color: #553631;
}

input {
	background-color: #eee;
	border: none;
	padding: 12px 15px;
	margin: 8px 0;
	width: 100%;
	font-size: 14px;
}

button {
	border-radius: 20px;
	border: 1px solid #e28d3e;
	background-color: #e28d3e;
	color: #FFFFFF;
	font-family: 'NoonnuBasicGothicRegular';
	font-size: 20px;
	font-weight: bold;
	padding: 12px 45px;
	letter-spacing: 1px;
	text-transform: uppercase;
	transition: transform 80ms ease-in;
	cursor: pointer;
	width: 100%;
}

button:active {
	transform: scale(0.95);
}

button:focus {
	outline: none;
}

#message {
	margin-top: 20px;
	text-align: center;
	font-size: 14px;
}

.error {
	color: #ee4035;
	font-size: 12px;
}

.password-hint {
	font-size: 12px;
	color: #666;
	margin-top: 5px;
	display: none;
}

.password-strength {
	margin-top: 5px;
}

.password-strength div {
	height: 5px;
	border-radius: 4px;
}

.weak {
	width: 33%;
	background-color: #ee4035;
}

.medium {
	width: 66%;
	background-color: #f37736;
}

.strong {
	width: 100%;
	background-color: #7bc043;
}
</style>
</head>

<body>
	<div class="container">
		<h2>íšŒì›ê°€ì…</h2>
		<form id="signupForm" action="../article?command=register"
			method="post">
			<div class="form-group">
				<label for="username">ì´ë¦„</label> <input type="text" id="username"
					name="username" required>
			</div>
			<div class="form-group">
				<label for="id">ì•„ì´ë””</label> <input type="text" id="id" name="id"
					required>
			</div>
			<div class="form-group">
				<label for="email">ì´ë©”ì¼</label> <input type="email" id="email"
					name="email" required>
			</div>
			<div class="form-group">
				<label for="password">ë¹„ë°€ë²ˆí˜¸</label> <input type="password"
					id="password" name="password" required>
				<div class="password-hint" id="passwordHint">
					â–ª ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 8ì ì´ìƒ <br> â–ª ëŒ€ë¬¸ì ì•ŒíŒŒë²³ì„ í•˜ë‚˜ ì´ìƒ í¬í•¨ (ì˜ˆ: A, B, C...) <br>
					â–ª ì†Œë¬¸ì ì•ŒíŒŒë²³ì„ í•˜ë‚˜ ì´ìƒ í¬í•¨ (ì˜ˆ: a, b, c...) <br> â–ª ìˆ«ìë¥¼ í•˜ë‚˜ ì´ìƒ í¬í•¨ <br>
					â–ª íŠ¹ìˆ˜ë¬¸ìë¥¼ í•˜ë‚˜ ì´ìƒ í¬í•¨ (ì˜ˆ: !, @, #...)
				</div>
				<span id="passwordError" class="error"></span>
				<div class="password-strength" id="passwordStrength"></div>
			</div>
			<div class="form-group">
				<label for="confirmPassword">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label> <input type="password"
					id="confirmPassword" name="confirmPassword" required> <span
					id="confirmPasswordError" class="error"></span>
			</div>
			<div class="form-group">
				<label for="nickname">ë‹‰ë„¤ì„</label> <input type="text" id="nickname"
					name="nickname" required>
			</div>
			<div class="form-group">
				<label>íšŒì› ìœ í˜•</label>
				<div>
					<label for="teacher">ì„ ìƒë‹˜</label> <input type="checkbox"
						id="teacher" name="roleCheckbox" value="teacher"
						onchange="toggleCheckbox(this)"> <label for="student">í•™ìƒ</label>
					<input type="checkbox" id="student" name="roleCheckbox"
						value="student" onchange="toggleCheckbox(this)">
				</div>
			</div>

			<!-- ì„ íƒëœ ê°’ì´ ì €ì¥ë  hidden input -->
			<input type="hidden" id="role" name="role" value="">

			<script>
			    function toggleCheckbox(clickedCheckbox) {
			        let checkboxes = document.getElementsByName("roleCheckbox");
			        checkboxes.forEach((checkbox) => {
			            if (checkbox !== clickedCheckbox) {
			                checkbox.checked = false; // ë‹¤ë¥¸ ì²´í¬ë°•ìŠ¤ ì„ íƒ í•´ì œ
			            }
			        });
			
			        // ì„ íƒëœ ì²´í¬ë°•ìŠ¤ì˜ valueë¥¼ hidden inputì— ì €ì¥
			        document.getElementById("role").value = clickedCheckbox.checked ? clickedCheckbox.value : "";
			    }
			</script>

			<button type="submit">ê°€ì… ì™„ë£Œ</button>
		</form>
		<p id="message"></p>
	</div>
	<script>
		document.getElementById('signupForm').addEventListener('submit', function (event) {
		    event.preventDefault(); // ê¸°ë³¸ ì œì¶œ ë™ì‘ ë§‰ê¸°
	
		    let username = document.getElementById('username').value;
		    let email = document.getElementById('email').value;
		    let password = document.getElementById('password').value;
		    let confirmPassword = document.getElementById('confirmPassword').value;
		    let message = document.getElementById('message');
		    let passwordError = document.getElementById('passwordError');
		    let confirmPasswordError = document.getElementById('confirmPasswordError');
	
		    // ë¹„ë°€ë²ˆí˜¸ ìœ íš¨ì„± ê²€ì‚¬
		    let passwordValid = validatePassword(password);
		    if (!passwordValid) {
		        passwordError.textContent = 'ë¹„ë°€ë²ˆí˜¸ê°€ ê¸°ì¤€ì— ë§ì§€ ì•ŠìŠµë‹ˆë‹¤.';
		        return;
		    } else {
		        passwordError.textContent = '';
		    }
	
		    // ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ì¼ì¹˜ ì—¬ë¶€ ê²€ì‚¬
		    if (password !== confirmPassword) {
		        confirmPasswordError.textContent = 'ë¹„ë°€ë²ˆí˜¸ê°€ ì„œë¡œ ë§ì§€ ì•ŠìŠµë‹ˆë‹¤.';
		        return;
		    } else {
		        confirmPasswordError.textContent = '';
		    }
	
		    // ì„±ê³µ ë©”ì‹œì§€ ì¶œë ¥ (ì´ ë¶€ë¶„ì€ ìœ ì§€)
		    message.style.color = 'green';
		    message.textContent = 'ê°€ì… ì™„ë£Œ! ì–´ë””ë¡œ ë– ë‚˜ë³¼ê¹Œìš”?';
	
		    // ğŸš€ í¼ ì œì¶œ (ì„œë²„ë¡œ ì „ì†¡)
		    this.submit(); // âœ… ìœ íš¨ì„± ê²€ì‚¬ í†µê³¼ í›„ í¼ ì œì¶œ ì‹¤í–‰
		});


        document.getElementById('password').addEventListener('focus', function () {
            document.getElementById('passwordHint').style.display = 'block';
        });

        document.getElementById('password').addEventListener('blur', function () {
            document.getElementById('passwordHint').style.display = 'none';
        });

        document.getElementById('password').addEventListener('input', function () {
            let password = this.value;
            let passwordStrength = document.getElementById('passwordStrength');
            let strength = getPasswordStrength(password);

            passwordStrength.innerHTML = ''; // Clear previous strength bars
            if (strength) {
                let strengthBar = document.createElement('div');
                strengthBar.className = strength;
                passwordStrength.appendChild(strengthBar);
            }
        });

        function validatePassword(password) {
            let regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
            return regex.test(password);
        }

        function getPasswordStrength(password) {
            if (password.length < 8) {
                return 'weak';
            }
            if (password.match(/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])/)) {
                return 'strong';
            }
            return 'medium';
        }
    </script>
</body>

</html>
